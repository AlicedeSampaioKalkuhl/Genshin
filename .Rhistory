my_freeze_team <- discard(my_freeze_team, ~ !("Cryo" %in% .x$element))
View(my_freeze_teams)
combat_teams %>% keep("Layla" %in% .x$character)
combat_teams %>% keep(~ "Layla" %in% .x$character)
team_df <- merge(my_characters,characters,on="character") %>%
filter(pulls > 0) %>%
group_by(character,style,element,weapon,region) %>% tally() %>% select(-n)
teams_characters <- combinations(length(team_df$character),4,team_df$character,repeats.allowed = FALSE) %>% as.data.frame()
teams <- list()
for (i in 1:nrow(teams_characters)){
team <- as.vector(teams_characters[i,])
this_team <- team_df %>%
filter(character %in% team)
teams[[i]] <- this_team
}
for (i in 1:nrow(teams_characters)){
team <- as.vector(teams_characters[i,])
this_team <- team_df %>%
filter(character %in% team)
teams[[i]] <- this_team
}
combat_teams <- teams %>% discard(.,~ "Exploration" %in% .x$style | "Expedition" %in% .x$style | "Unused" %in% .x$style)
combat_teams <- combat_teams %>% discard(., ~ "Alhaitham" %in% .x$character & !("Kaveh" %in% .x$character) & !("Hydro" %in% .x$element) & !("Electro" %in% .x$element))
combat_teams <- combat_teams %>% discard(., ~ "Charlotte" %in% .x$character & !("Fontaine" %in% .x$region))
combat_teams <- combat_teams %>% discard(., ~ "Chiori" %in% .x$character & length(grep("Anemo",.x$element)) < 3)
combat_teams <- combat_teams %>% discard(., ~ "Emilie" %in% .x$character & !("Pyro" %in% .x$element))
combat_teams <- combat_teams %>% discard(., ~ "Faruzan" %in% .x$character & length(grep("Anemo",.x$element)) < 3)
combat_teams <- combat_teams %>% discard(., ~ "Gaming" %in% .x$character & !("Anemo" %in% .x$element))
combat_teams <- combat_teams %>% discard(., ~ "Kaveh" %in% .x$character & !("Alhaitham" %in% .x$character) & !("Hydro" %in% .x$element))
combat_teams <- combat_teams %>% discard(., ~ "Lynette" %in% .x$character & length(grep("Anemo",.x$element)) > 2 | "Lynette" %in% .x$character & length(grep("Geo",.x$element)) > 2 | "Lynette" %in% .x$character & length(grep("Anemo",.x$element))+ length(grep("Geo",.x$element)) > 2)
combat_teams <- combat_teams %>% discard(., ~ "Nilou" %in%  .x$character & "Electro" %in% .x$element | "Nilou" %in%  .x$character & "Anemo" %in% .x$element | "Nilou" %in%  .x$character & "Geo" %in% .x$element | "Nilou" %in%  .x$character & "Pyro" %in% .x$element | "Nilou" %in%  .x$character & "Cryo" %in% .x$element | "Nilou" %in%  .x$character & "Electro" %in% .x$element & length(grep("Dendro",.x$element)) < 1)
combat_teams <- combat_teams %>% discard(., ~ "Shenhe" %in% .x$character & length(grep("Cryo",.x$element))<2)
combat_teams <- combat_teams %>% discard(., ~ "Sangonomiya Kokomi" %in% .x$character & "Dendro" %in% .x$element)
combat_teams <- combat_teams %>% discard(., ~ "Sayu" %in% .x$character &  length(grep("Anemo",.x$element))>1 | "Sayu" %in% .x$character &  length(grep("Cryo",.x$element))>1 | "Sayu" %in% .x$character &  length(grep("Dendro",.x$element))>1 |  "Sayu" %in% .x$character &  length(grep("Electro",.x$element))>1 | "Sayu" %in% .x$character &  length(grep("Geo",.x$element))>1 | "Sayu" %in% .x$character &  length(grep("Hydro",.x$element))>1 | "Sayu" %in% .x$character &  length(grep("Pyro",.x$element))>1)
combat_teams <- combat_teams <- combat_teams %>% discard(., ~ "Sucrose" %in% .x$character & length(grep("Anemo",.x$element)) > 2 | "Sucrose" %in% .x$character & length(grep("Geo",.x$element)) > 2 | "Lynette" %in% .x$character & length(grep("Anemo",.x$element)) + length(grep("Geo",.x$element)) > 2)
freeze_teams <- discard(combat_teams, ~ "Pyro" %in% .x$element | "Claymore" %in% .x$weapon | "Unused" %in% .x$style)
my_freeze_team <- discard(freeze_teams, ~ !("Hydro" %in% .x$element))
my_freeze_team <- discard(my_freeze_team, ~ !("Cryo" %in% .x$element))
length(my_freeze_team)
knitr::opts_knit$set(root.dir = 'C:/Users/alice/Documents/GitHub/Genshin')
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, results='asis')
library(tidyverse)
library(purrr)
library(rmarkdown)
library(gtools)
library(DT)
library(tableHTML)
rmd_tabsets <- function(.data) {
# first empty header to intialize tabsets
cat("#### { .tabset .unlisted .unnumbered}", "\n\n", sep = "")
purrr::imap(.data, function(.x, .y) {
cat("##### TEAM ", .y, "\n\n", sep = "")
print(tableHTML::tableHTML(.x, border = 0))
cat("\n\n")
})
# close with empty header to stop tabsets
cat("#### {.unlisted .unnumbered}")
}
hyperbloom_teams <- keep(teams, ~ "Dendro" %in% .x$element & "Hydro" %in% .x$element & "Electro" %in% .x$element)
my_hyperbloom_team <- discard(hyperbloom_teams, ~ "Unused" %in% .x$style | "Exploration" %in% .x$style)
View(my_hyperbloom_team)
hyperbloom_teams <- keep(teams, ~ "Dendro" %in% .x$element & "Hydro" %in% .x$element & "Electro" %in% .x$element)
my_hyperbloom_team <- discard(hyperbloom_teams, ~ "Unused" %in% .x$style | "Exploration" %in% .x$style)
exploration_teams <- keep(teams, ~ "Pyro" %in% .x$element & "Bow" %in% .x$weapon)
Mondstadt <- keep(exploration_teams, ~ length(grep("Mondstadt",.x$region))==4 & "Anemo" %in% .x$element & "Electro" %in% .x$element)
Liyue <- keep(exploration_teams, ~ length(grep("Liyue",.x$region))==4 & "Geo" %in% .x$element & "Yanfei" %in% .x$character)
Liyue <- keep(exploration_teams, ~ length(grep("Liyue",.x$region))==4)
Liyue <- keep(exploration_teams, ~ length(grep("Liyue",.x$region))=4)
Liyue <- keep(exploration_teams, ~ length(grep("Liyue",.x$region))==4)
Liyue <- keep(exploration_teams, ~ "Liyue" %in% .x$region & "Geo" %in% .x$element & "Yanfei" %in% .x$character)
my_Liyue_exploration <- discard(Liyue, ~ "Unused" %in% .x$style | "Mondstadt" %in% .x$region | "Inazuma" %in% .x$region | "Sumeru" %in% .x$region | "Fontaine" %in% .x$region)
my_Liyue_exploration <- Liyue %>% discard(., ~ "Unused" %in% .x$style) %>% discard(., ~ "Mondstadt" %in% .x$region) %>% discard(., ~ "Inazuma" %in% .x$region) %>% discard(., "Sumeru" %in% .x$region) %>% discard("Fontaine" %in% .x$region)
my_Liyue_exploration <- Liyue %>% discard(., ~ "Unused" %in% .x$style) %>% discard(., ~ "Mondstadt" %in% .x$region) %>% discard(., ~ "Inazuma" %in% .x$region) %>% discard(., "Sumeru" %in% .x$region) %>% discard(., ~ "Fontaine" %in% .x$region)
my_Liyue_exploration <- Liyue %>% discard(., ~ "Unused" %in% .x$style) %>% discard(., ~ "Mondstadt" %in% .x$region) %>% discard(., ~ "Inazuma" %in% .x$region) %>% discard(., ~ "Sumeru" %in% .x$region) %>% discard(., ~ "Fontaine" %in% .x$region)
my_Liyue_exploration <-exploration_teams %>% keep(., ~ "Liyue" %in% .x$region & "Geo" %in% .x$element & "Yanfei" %in% .x$character) %>% discard(., ~ "Unused" %in% .x$style) %>% discard(., ~ "Mondstadt" %in% .x$region) %>% discard(., ~ "Inazuma" %in% .x$region) %>% discard(., ~ "Sumeru" %in% .x$region) %>% discard(., ~ "Fontaine" %in% .x$region)
rmd_tabsets(my_Liyue_exploration)
keep(exploration_teams, ~ length(grep("Sumeru",.x$region))==4 & "Dendro" %in% .x$element & "Electro" %in% .x$element & "Tighnari" %in% .x$character)
Sumeru_forest <- keep(exploration_teams, ~ "Sumeru" %in% .x$region "Dendro" %in% .x$element & "Electro" %in% .x$element & "Tighnari" %in% .x$character)
Sumeru_forest <- keep(exploration_teams, ~ "Sumeru" %in% .x$region & "Dendro" %in% .x$element & "Electro" %in% .x$element & "Tighnari" %in% .x$character)
my_Sumeru_desert_exploration <- keep(exploration_teams, ~ "Sumeru" %in% .x$region & "Dendro" %in% .x$element & "Anemo" %in% .x$element & "Sethos" %in% .x$character) %>% discard(., ~ "Unused" %in% .x$style) %>% discard(., ~ "Mondstadt" %in% .x$region) %>% discard(., ~ "Liyue" %in% .x$region) %>% discard(., ~ "Inazuma" %in% .x$region) %>% discard(., ~ "Fontaine" %in% .x$region)
my_Sumeru_desert_exploration <- keep(exploration_teams, ~ "Sumeru" %in% .x$region & "Dendro" %in% .x$element) %>% keep("Anemo" %in% .x$element & "Sethos" %in% .x$character) %>% discard(., ~ "Unused" %in% .x$style) %>% discard(., ~ "Mondstadt" %in% .x$region) %>% discard(., ~ "Liyue" %in% .x$region) %>% discard(., ~ "Inazuma" %in% .x$region) %>% discard(., ~ "Fontaine" %in% .x$region)
my_Sumeru_desert_exploration <- keep(exploration_teams, ~ "Sumeru" %in% .x$region & "Dendro" %in% .x$element) %>% keep(.,~"Anemo" %in% .x$element & "Sethos" %in% .x$character) %>% discard(., ~ "Unused" %in% .x$style) %>% discard(., ~ "Mondstadt" %in% .x$region) %>% discard(., ~ "Liyue" %in% .x$region) %>% discard(., ~ "Inazuma" %in% .x$region) %>% discard(., ~ "Fontaine" %in% .x$region)
my_Sumeru_desert_exploration <- keep(exploration_teams, ~ "Sumeru" %in% .x$region )
my_Sumeru_desert_exploration <- keep(exploration_teams, ~ "Sumeru" %in% .x$region & "Dendro" %in% .x$element)
my_Sumeru_desert_exploration <- keep(exploration_teams, ~ "Sumeru" %in% .x$region & "Dendro" %in% .x$element) %>% keep(.,~"Anemo" %in% .x$element & "Sethos" %in% .x$character)
my_Sumeru_desert_exploration %>% View()
my_Liyue_exploration <-exploration_teams %>% keep(., ~ "Liyue" %in% .x$region & "Geo" %in% .x$element & "Yanfei" %in% .x$character) %>% discard(., ~ "Unused" %in% .x$style) %>% discard(., ~ "Mondstadt" %in% .x$region) %>% discard(., ~ "Inazuma" %in% .x$region) %>% discard(., ~ "Sumeru" %in% .x$region) %>% discard(., ~ "Fontaine" %in% .x$region)
my_Liyue_exploration
my_Liyue_exploration <-exploration_teams %>% keep(., ~ "Liyue" %in% .x$region & "Geo" %in% .x$element & "Yanfei" %in% .x$character) %>% discard(., ~ "Unused" %in% .x$style)
my_Liyue_exploration <-exploration_teams %>% keep(., ~ "Liyue" %in% .x$region & "Geo" %in% .x$element & "Yanfei" %in% .x$character) %>% discard(., ~ "Unused" %in% .x$style) %>% discard(., ~ "Mondstadt" %in% .x$region)
my_Liyue_exploration <-exploration_teams %>% keep(., ~ "Liyue" %in% .x$region & "Geo" %in% .x$element & "Yanfei" %in% .x$character) %>% discard(., ~ "Unused" %in% .x$style) %>% discard(., ~ "Mondstadt" %in% .x$region) %>% discard(., ~ "Inazuma" %in% .x$region)
my_Liyue_exploration <-exploration_teams %>% keep(., ~ "Liyue" %in% .x$region & "Geo" %in% .x$element & "Yanfei" %in% .x$character) %>% discard(., ~ "Unused" %in% .x$style) %>% discard(., ~ "Mondstadt" %in% .x$region) %>% discard(., ~ "Inazuma" %in% .x$region) %>% discard(., ~ "Sumeru" %in% .x$region)
library(tidyverse)
library(purrr)
library(rmarkdown)
library(gtools)
library(DT)
library(tableHTML)
level_up_materials <- read.csv("character_materials.csv") %>%
separate_rows(character,sep=' & ')
local_specialties <- read.csv("local_specialties.csv") %>% separate_rows(character,sep=' & ')
all_characters <- read.csv("all_characters.csv") %>% group_by(element) %>% mutate(element_score=n()) %>% ungroup()
characters <- purrr::reduce(list(all_characters,level_up_materials,local_specialties), dplyr::left_join, by = "character") %>% mutate(ascension = case_when(
element == "Traveler" ~ "Brilliant Diamond",
element == "Pyro" ~ "Agnidus Agate",
element == "Hydro" ~ "Varunada Lazurite",
element == "Dendro" ~ "Nagadus Emerald",
element == "Electro" ~ "Vajrada Amethyst",
element == "Anemo" ~ "Vayuda Turquoise",
element == "Cryo" ~ "Shivada Jade",
element == "Geo" ~ "Prithiva Topaz"))
View(all_characters)
View(characters)
View(level_up_materials)
View(local_specialties)
View(characters)
talents <- read.csv("talents.csv") %>%
separate_rows(character,sep=' & ')
save(characters,"../../Genshin/data/characters.rda")
save(characters,"../../../Genshin/data/characters.rda")
save(characters,"../../GenshinImpact/data/characters.rda")
save(characters,"./../../GenshinImpact/data/characters.rda")
save(characters,"../../../GenshinImpact/data/characters.rda")
save(characters,"../GenshinImpact/data/characters.rda")
save(characters,"../../GenshinImpact/data/characters.rda")
save(characters,"/../../GenshinImpact/data/characters.rda")
save(characters,"..\..\GenshinImpact\data\characters.rda")
save(characters,"characters.rda")
save(characters,file="characters.rda")
save(characters,file="../../GenshinImpact/data/characters.rda")
View(characters)
artifacts <- read.csv("artifacts")
# data preparation
library(tidyverse)
library(purrr)
library(rmarkdown)
library(gtools)
library(DT)
library(tableHTML)
level_up_materials <- read.csv("character_materials.csv") %>%
separate_rows(character,sep=' & ')
local_specialties <- read.csv("local_specialties.csv") %>% separate_rows(character,sep=' & ')
all_characters <- read.csv("all_characters.csv") %>% group_by(element) %>% mutate(element_score=n()) %>% ungroup()
talents <- read.csv("talents.csv") %>%
separate_rows(character,sep=' & ')
characters <- purrr::reduce(list(all_characters,level_up_materials,local_specialties,talents), dplyr::left_join, by = "character") %>% mutate(ascension = case_when(
element == "Traveler" ~ "Brilliant Diamond",
element == "Pyro" ~ "Agnidus Agate",
element == "Hydro" ~ "Varunada Lazurite",
element == "Dendro" ~ "Nagadus Emerald",
element == "Electro" ~ "Vajrada Amethyst",
element == "Anemo" ~ "Vayuda Turquoise",
element == "Cryo" ~ "Shivada Jade",
element == "Geo" ~ "Prithiva Topaz"))
save(characters,file="../../GenshinImpact/data/characters.rda")
artifacts <- read.csv("artifacts.csv")
save(artifacts,file="../../GenshinImpact/data/characters.rda")
save(characters,file="../../GenshinImpact/data/characters.rda")
artifacts <- read.csv("artifacts.csv")
save(artifacts,file="../../GenshinImpact/data/artifacts.rda")
stats <- c("ATK","DEF","EM","ER","HP","PHYS","Anemo DMG","Dendro DMG","Electro DMG","Geo DMG","Hydro DMG","Pyro DMG")
save(artifacts,file="../../GenshinImpact/data/stats.rda")
style <- c("Main","DPS","Sub DPS","Shielder","Healer","Support","Exploration","Unused")
save(artifacts,file="../../GenshinImpact/data/style.rda")
constelations <- c("NA","C0","C1","C2","C3","C4","C5","C6")
constellations <- c("NA","C0","C1","C2","C3","C4","C5","C6")
save(artifacts,file="../../GenshinImpact/data/constellations.rda")
stats <- c("ATK","DEF","EM","ER","HP","PHYS","Anemo DMG","Dendro DMG","Electro DMG","Geo DMG","Hydro DMG","Pyro DMG")
save(artifacts,file="../../GenshinImpact/data/stats.rda")
style <- c("Main","DPS","Sub DPS","Shielder","Healer","Support","Exploration","Unused")
save(artifacts,file="../../GenshinImpact/data/style.rda")
# data preparation
library(tidyverse)
library(purrr)
library(rmarkdown)
library(gtools)
library(DT)
library(tableHTML)
level_up_materials <- read.csv("character_materials.csv") %>%
separate_rows(character,sep=' & ')
local_specialties <- read.csv("local_specialties.csv") %>% separate_rows(character,sep=' & ')
all_characters <- read.csv("all_characters.csv") %>% group_by(element) %>% mutate(element_score=n()) %>% ungroup()
talents <- read.csv("talents.csv") %>%
separate_rows(character,sep=' & ')
characters <- purrr::reduce(list(all_characters,level_up_materials,local_specialties,talents), dplyr::left_join, by = "character") %>% mutate(ascension = case_when(
element == "Traveler" ~ "Brilliant Diamond",
element == "Pyro" ~ "Agnidus Agate",
element == "Hydro" ~ "Varunada Lazurite",
element == "Dendro" ~ "Nagadus Emerald",
element == "Electro" ~ "Vajrada Amethyst",
element == "Anemo" ~ "Vayuda Turquoise",
element == "Cryo" ~ "Shivada Jade",
element == "Geo" ~ "Prithiva Topaz"))
save(characters,file="../../GenshinImpact/data/characters.rda")
artifacts <- read.csv("artifacts.csv")
save(artifacts,file="../../GenshinImpact/data/artifacts.rda")
constellations <- c("NA","C0","C1","C2","C3","C4","C5","C6")
save(constellations,file="../../GenshinImpact/data/constellations.rda")
stats <- c("ATK","DEF","EM","ER","HP","PHYS","Anemo DMG","Dendro DMG","Electro DMG","Geo DMG","Hydro DMG","Pyro DMG")
save(stats,file="../../GenshinImpact/data/stats.rda")
style <- c("Main","DPS","Sub DPS","Shielder","Healer","Support","Exploration","Unused")
save(style,file="../../GenshinImpact/data/style.rda")
library(tidyverse)
library(installr)
updateR()
library(tidyverse)
my_characters <- read.csv("my_characters.csv",header=T)
builds <- read.csv("builds.csv",header=T)
my_weapons <- read.csv("my_weapons.csv",header=T)
artifacts <- read.csv("artifactfarming.csv",header=T)
all_characters <- read.csv("all_characters.csv",header=T)
View(all_characters)
rm(all_characters)
View(artifacts)
artifacts <- read.csv("artifactfarming.csv",header=T,sep=",")
View(artifacts)
rm(my_characters)
rm(my_weapons)
characters <- read.csv("my_characters.csv",header=T) # my characters
builds <- read.csv("builds.csv",header=T) # builds used
weapons <- read.csv("my_weapons.csv",header=T) # my weapons
artifacts <- read.csv("artifactfarming.csv",header=T,sep=",")
artifacts %>%
mutate(type = ifelse(is.na(character)==TRUE,"spare","build") %>%
sub1_rv = case_when(sub1==HP & sub1_value < 1 ~ sub1_value/0.0583,
artifacts %>% group_by(sub1) %>% tally()
library(available)
install.packages("available")
artifacts <- read.csv("artifactfarming.csv",header=T)
artifacts %>% arrange(set,type,main,character)
library(tidyverse)
artifacts %>% arrange(set,type,main,character)
artifacts %>% arrange(set,type,main,character) %>% head()
artifacts %>% arrange(set,as.factor(type, levels=c("Flower","Feather","Sands","Goblet","Circlet")),main,character) %>% head()
artifacts %>% arrange(set,factor(type, levels=c("Flower","Feather","Sands","Goblet","Circlet")),main,character) %>% head()
artifacts %>% arrange(set,factor(type, levels=c("Flower","Feather","Sands","Goblet","Circlet")),main,character) %>% write.csv(,"artifactfarming.csv",row.names=F,quote=F)
artifacts %>% arrange(set,factor(type, levels=c("Flower","Feather","Sands","Goblet","Circlet")),main,character) %>% write.csv(.,"artifactfarming.csv",row.names=F,quote=F)
characters <- read.csv("my_characters.csv",header=T) # my characters
builds <- read.csv("builds.csv",header=T) # builds used
weapons <- read.csv("my_weapons.csv",header=T) # my weapons
artifacts <- read.csv("artifacts.csv",header=T) # my artifacts and planning
library(tidyverse)
artifact_set <- c("Archaic Petra","Blizzard Strayer","Crimson Witch of Flames","Deepwood Memories","Desert Pavillion Chronicle","Echoes of An Offering","Emblem of Severed Fate","Finale of Deep Galleries","Flower of Paradise Lost","Fragment of Harmonic Whimsy","Gilded Dreams","Gladiator's Finale","Golden Troupe","Heart of Depths","Husk of Oppulent Dreams","Lavawalker","Long Night's Oath","Maiden Beloved","Marechaussee Hunter","Night of the Sky's Unveiling","Nighttime Whispers in the Echoing Woods","Noblesse Oblige","Nymph's Dream","Obsidian Codex","Ocean-Hued Clam","Pale Flame","Retracing Bolide","Scroll of the Hero of Cinder City","Silken Moon's Serenade","Shimenawa's Reminiscence","Song of Day's Past","Tenacity of the Milileth","Thundering Fury","Thundersoother","Unfinished Reverie","Vermillion Hereafter","Viridescent Venerer","Vourukasha's Glow","Wanderer's Troupe")
artifact_type<-c("Flower","Feather","Sands","Goblet","Circlet")
artifacts_needed <- expand_grid(artifact_set,artifact_type) %>%
mutate(artifact_main=case_when(artifact_type=="Flower" ~ "HP",
artifact_type=="Feather" ~ "ATK",
artifact_type=="Sands" ~ "ATK:DEF:ER:EM:HP",
artifact_type=="Goblet" ~"Anemo_DMG:ATK:Cryo_DMG:DEF:Dendro_DMG:Electro_DMG:EM:Geo_DMG:HP:Hydro_DMG:Pyro_DMG",
artifact_type=="Circlet" ~ "ATK:Crit_DMG:Crit_Rate:DEF:Healing_Bonus:EM:HP")) %>% separate_longer_delim(artifact_main,delim=":")
builds_artifacts <- builds %>% select(build_name,artifact_set,artifact_main) %>% separate_longer_delim(artifact_main,delim=":") %>% separate_longer_delim(artifact_set,delim=":") %>% group_by(build_name) %>% mutate(artifact_type=rep(c("Flower","Feather","Sands","Goblet","Circlet"),length.out=n()))
artifactfarming <- dplyr::bind_rows(artifacts_needed,builds_artifacts) %>% arrange(artifact_set,factor(artifact_type,levels=c("Flower","Feather","Sands","Goblet","Circlet"))) %>% ungroup()
artifacts <- artifacts %>%
mutate(sub1_rv = case_when(sub1 == "HP" & sub1_value < 1 ~ sub1_value/0.2915,
sub1== "HP" & sub1_value > 1 ~ sub1_value/1493.75,
sub1== "ATK" & sub1_value < 1 ~ sub1_value/0.2915,
sub1== "ATK" & sub1_value > 1 ~ sub1_value/97.25,
sub1== "DEF" & sub1_value < 1 ~ sub1_value/0.3645,
sub1== "DEF" & sub1_value > 1 ~ sub1_value/115.75,
sub1== "ER" ~ sub1_value/0.0648,
sub1== "EM" ~ sub1_value/116.55,
sub1== "Crit-Rate" ~ sub1_value/0.1945,
sub1== "Crit-Damage" ~ sub1_value/0.3885),
sub2_rv = case_when(sub2 == "HP" & sub2_value < 1 ~ sub2_value/0.2915,
sub2== "HP" & sub2_value > 1 ~ sub2_value/1493.75,
sub2== "ATK" & sub2_value < 1 ~ sub2_value/0.2915,
sub2== "ATK" & sub2_value > 1 ~ sub2_value/97.25,
sub2== "DEF" & sub2_value < 1 ~ sub2_value/0.3645,
sub2== "DEF" & sub2_value > 1 ~ sub2_value/115.75,
sub2== "ER" ~ sub2_value/0.0648,
sub2== "EM" ~ sub2_value/116.55,
sub2== "Crit-Rate" ~ sub2_value/0.1945,
sub2== "Crit-Damage" ~ sub2_value/0.3885),
sub3_rv = case_when(sub3 == "HP" & sub3_value < 1 ~ sub3_value/0.2915,
sub3== "HP" & sub3_value > 1 ~ sub3_value/1493.75,
sub3== "ATK" & sub3_value < 1 ~ sub3_value/0.2915,
sub3== "ATK" & sub3_value > 1 ~ sub3_value/97.25,
sub3== "DEF" & sub3_value < 1 ~ sub3_value/0.3645,
sub3== "DEF" & sub3_value > 1 ~ sub3_value/115.75,
sub3== "ER" ~ sub3_value/0.0648,
sub3== "EM" ~ sub3_value/116.55,
sub3== "Crit-Rate" ~ sub3_value/0.1945,
sub3== "Crit-Damage" ~ sub3_value/0.3885),
sub4_rv = case_when(sub4 == "HP" & sub4_value < 1 ~ sub4_value/0.2915,
sub4== "HP" & sub4_value > 1 ~ sub4_value/1493.75,
sub4== "ATK" & sub4_value < 1 ~ sub4_value/0.2915,
sub4== "ATK" & sub4_value > 1 ~ sub4_value/97.25,
sub4== "DEF" & sub4_value < 1 ~ sub4_value/0.3645,
sub4== "DEF" & sub4_value > 1 ~ sub4_value/115.75,
sub4== "ER" ~ sub4_value/0.324,
sub4== "EM" ~ sub4_value/116.55,
sub4== "Crit-Rate" ~ sub4_value/0.1945,
sub4== "Crit-Damage" ~ sub4_value/0.3885),
rv=100*(sub1_rv+sub2_rv+sub3_rv+sub4_rv)) %>%
arrange(-rv)
# account info
characters <- read.csv("my_characters.csv",header=T) # my characters
builds <- read.csv("builds.csv",header=T) # builds used
weapons <- read.csv("my_weapons.csv",header=T) # my weapons
artifacts <- read.csv("artifacts.csv",header=T) # my artifacts and planning
artifact_set <- c("Archaic Petra","Blizzard Strayer","Crimson Witch of Flames","Deepwood Memories","Desert Pavillion Chronicle","Echoes of An Offering","Emblem of Severed Fate","Finale of Deep Galleries","Flower of Paradise Lost","Fragment of Harmonic Whimsy","Gilded Dreams","Gladiator's Finale","Golden Troupe","Heart of Depths","Husk of Oppulent Dreams","Lavawalker","Long Night's Oath","Maiden Beloved","Marechaussee Hunter","Night of the Sky's Unveiling","Nighttime Whispers in the Echoing Woods","Noblesse Oblige","Nymph's Dream","Obsidian Codex","Ocean-Hued Clam","Pale Flame","Retracing Bolide","Scroll of the Hero of Cinder City","Silken Moon's Serenade","Shimenawa's Reminiscence","Song of Day's Past","Tenacity of the Milileth","Thundering Fury","Thundersoother","Unfinished Reverie","Vermillion Hereafter","Viridescent Venerer","Vourukasha's Glow","Wanderer's Troupe")
artifact_type<-c("Flower","Feather","Sands","Goblet","Circlet")
artifacts_needed <- expand_grid(artifact_set,artifact_type) %>%
mutate(artifact_main=case_when(artifact_type=="Flower" ~ "HP",
artifact_type=="Feather" ~ "ATK",
artifact_type=="Sands" ~ "ATK:DEF:ER:EM:HP",
artifact_type=="Goblet" ~"Anemo_DMG:ATK:Cryo_DMG:DEF:Dendro_DMG:Electro_DMG:EM:Geo_DMG:HP:Hydro_DMG:Pyro_DMG",
artifact_type=="Circlet" ~ "ATK:Crit_DMG:Crit_Rate:DEF:Healing_Bonus:EM:HP")) %>% separate_longer_delim(artifact_main,delim=":")
builds_artifacts <- builds %>% select(build_name,artifact_set,artifact_main) %>% separate_longer_delim(artifact_main,delim=":") %>% separate_longer_delim(artifact_set,delim=":") %>% group_by(build_name) %>% mutate(artifact_type=rep(c("Flower","Feather","Sands","Goblet","Circlet"),length.out=n()))
artifactfarming <- dplyr::bind_rows(artifacts_needed,builds_artifacts) %>% arrange(artifact_set,factor(artifact_type,levels=c("Flower","Feather","Sands","Goblet","Circlet"))) %>% ungroup()
artifacts <- artifacts %>%
mutate(sub1_rv = case_when(sub1 == "HP" & sub1_value < 1 ~ sub1_value/0.2915,
sub1== "HP" & sub1_value > 1 ~ sub1_value/1493.75,
sub1== "ATK" & sub1_value < 1 ~ sub1_value/0.2915,
sub1== "ATK" & sub1_value > 1 ~ sub1_value/97.25,
sub1== "DEF" & sub1_value < 1 ~ sub1_value/0.3645,
sub1== "DEF" & sub1_value > 1 ~ sub1_value/115.75,
sub1== "ER" ~ sub1_value/0.0648,
sub1== "EM" ~ sub1_value/116.55,
sub1== "Crit-Rate" ~ sub1_value/0.1945,
sub1== "Crit-Damage" ~ sub1_value/0.3885),
sub2_rv = case_when(sub2 == "HP" & sub2_value < 1 ~ sub2_value/0.2915,
sub2== "HP" & sub2_value > 1 ~ sub2_value/1493.75,
sub2== "ATK" & sub2_value < 1 ~ sub2_value/0.2915,
sub2== "ATK" & sub2_value > 1 ~ sub2_value/97.25,
sub2== "DEF" & sub2_value < 1 ~ sub2_value/0.3645,
sub2== "DEF" & sub2_value > 1 ~ sub2_value/115.75,
sub2== "ER" ~ sub2_value/0.0648,
sub2== "EM" ~ sub2_value/116.55,
sub2== "Crit-Rate" ~ sub2_value/0.1945,
sub2== "Crit-Damage" ~ sub2_value/0.3885),
sub3_rv = case_when(sub3 == "HP" & sub3_value < 1 ~ sub3_value/0.2915,
sub3== "HP" & sub3_value > 1 ~ sub3_value/1493.75,
sub3== "ATK" & sub3_value < 1 ~ sub3_value/0.2915,
sub3== "ATK" & sub3_value > 1 ~ sub3_value/97.25,
sub3== "DEF" & sub3_value < 1 ~ sub3_value/0.3645,
sub3== "DEF" & sub3_value > 1 ~ sub3_value/115.75,
sub3== "ER" ~ sub3_value/0.0648,
sub3== "EM" ~ sub3_value/116.55,
sub3== "Crit-Rate" ~ sub3_value/0.1945,
sub3== "Crit-Damage" ~ sub3_value/0.3885),
sub4_rv = case_when(sub4 == "HP" & sub4_value < 1 ~ sub4_value/0.2915,
sub4== "HP" & sub4_value > 1 ~ sub4_value/1493.75,
sub4== "ATK" & sub4_value < 1 ~ sub4_value/0.2915,
sub4== "ATK" & sub4_value > 1 ~ sub4_value/97.25,
sub4== "DEF" & sub4_value < 1 ~ sub4_value/0.3645,
sub4== "DEF" & sub4_value > 1 ~ sub4_value/115.75,
sub4== "ER" ~ sub4_value/0.324,
sub4== "EM" ~ sub4_value/116.55,
sub4== "Crit-Rate" ~ sub4_value/0.1945,
sub4== "Crit-Damage" ~ sub4_value/0.3885),
rv=100*(sub1_rv+sub2_rv+sub3_rv+sub4_rv)) %>%
arrange(-rv)
head(artifacts) # 6 highest rv artifacts on the account
# find artifacts you need
artifacts_summary <- artifacts %>% group_by(set,type,main) %>% summarise(n_have=n())
artifactfarming_summary <- artifactfarming %>% group_by(artifact_set,artifact_type,artifact_main) %>% summarise(n_needed=n())
left_join(artifactfarming_summary,artifacts_summary, by=c("artifact_set"="set","artifact_type"="type","artifact_main"="main")) %>%mutate_all(~replace(., is.na(.), 0)) %>% mutate(n_need=n_needed-n_have) %>% write.table(.,"artifactfarming.csv",sep=",",row.names=FALSE,quote=FALSE)
head(artifactfarming_summary)
artifactfarming_summary %>%group_by(artifact_set) %>% summarrise(n=n())
artifactfarming_summary %>%group_by(artifact_set) %>% summarise(n=n())
artifactfarming_summary %>%group_by(artifact_set) %>% summarise(n=n()) %>% arrange(n)
artifactfarming_summary %>%group_by(artifact_set) %>% summarise(n=n()) %>% arrange(-n)
artifacts_summary <- artifacts %>% group_by(set,type,main) %>% summarise(n_have=n())
artifactfarming_summary <- artifactfarming %>% group_by(artifact_set,artifact_type,artifact_main) %>% summarise(n_needed=n())
left_join(artifactfarming_summary,artifacts_summary, by=c("artifact_set"="set","artifact_type"="type","artifact_main"="main")) %>%mutate_all(~replace(., is.na(.), 0)) %>% mutate(n_need=n_needed-n_have) %>% write.table(.,"artifactfarming.csv",sep=",",row.names=FALSE,quote=FALSE)
artifactfarming_summary %>%group_by(artifact_set) %>% summarise(n=n()) %>% arrange(-n)
artifactfarming_summary %>%group_by(artifact_set) %>% summarise(n=n()) %>% arrange(-n) %>% write.csv("level_farm.csv")
artifactfarming_summary %>%group_by(artifact_set) %>% summarise(n=n()) %>% arrange(-n) %>% write.csv("level_farm.csv",row.names=FALSE,quote=FALSE)
library(tidyverse)
save.image()
characters <- read.csv("my_characters.csv",header=T) # my characters
builds <- read.csv("builds.csv",header=T) # builds used
weapons <- read.csv("my_weapons.csv",header = T) # my weapons
artifacts <- read.csv("artifacts.csv",header=T) # my artifacts and planning
artifact_set <- c("Archaic Petra","Blizzard Strayer","Crimson Witch of Flames","Deepwood Memories","Desert Pavillion Chronicle","Echoes of An Offering","Emblem of Severed Fate","Finale of Deep Galleries","Flower of Paradise Lost","Fragment of Harmonic Whimsy","Gilded Dreams","Gladiator's Finale","Golden Troupe","Heart of Depths","Husk of Oppulent Dreams","Lavawalker","Long Night's Oath","Maiden Beloved","Marechaussee Hunter","Night of the Sky's Unveiling","Nighttime Whispers in the Echoing Woods","Noblesse Oblige","Nymph's Dream","Obsidian Codex","Ocean-Hued Clam","Pale Flame","Retracing Bolide","Scroll of the Hero of Cinder City","Silken Moon's Serenade","Shimenawa's Reminiscence","Song of Day's Past","Tenacity of the Milileth","Thundering Fury","Thundersoother","Unfinished Reverie","Vermillion Hereafter","Viridescent Venerer","Vourukasha's Glow","Wanderer's Troupe")
artifact_type <- c("Flower","Feather","Sands","Goblet","Circlet")
artifacts_needed <- expand_grid(artifact_set,artifact_type) %>%
mutate(artifact_main=case_when(artifact_type=="Flower" ~ "HP",
artifact_type=="Feather" ~ "ATK",
artifact_type=="Sands" ~ "ATK:DEF:ER:EM:HP",
artifact_type=="Goblet" ~"Anemo_DMG:ATK:Cryo_DMG:DEF:Dendro_DMG:Electro_DMG:EM:Geo_DMG:HP:Hydro_DMG:Pyro_DMG",
artifact_type=="Circlet" ~ "ATK:Crit_DMG:Crit_Rate:DEF:Healing_Bonus:EM:HP")) %>% separate_longer_delim(artifact_main,delim=":")
builds_artifacts <- builds %>% select(build_name,artifact_set,artifact_main) %>% separate_longer_delim(artifact_main,delim=":") %>% separate_longer_delim(artifact_set,delim=":") %>% group_by(build_name) %>% mutate(artifact_type=rep(c("Flower","Feather","Sands","Goblet","Circlet"),length.out=n()))
artifactfarming <- dplyr::bind_rows(artifacts_needed,builds_artifacts) %>% arrange(artifact_set,factor(artifact_type,levels=c("Flower","Feather","Sands","Goblet","Circlet"))) %>% ungroup()
artifacts <- artifacts %>%
mutate(sub1_rv = case_when(sub1 == "HP" & sub1_value < 1 ~ sub1_value/0.2915,
sub1== "HP" & sub1_value > 1 ~ sub1_value/1493.75,
sub1== "ATK" & sub1_value < 1 ~ sub1_value/0.2915,
sub1== "ATK" & sub1_value > 1 ~ sub1_value/97.25,
sub1== "DEF" & sub1_value < 1 ~ sub1_value/0.3645,
sub1== "DEF" & sub1_value > 1 ~ sub1_value/115.75,
sub1== "ER" ~ sub1_value/0.0648,
sub1== "EM" ~ sub1_value/116.55,
sub1== "Crit-Rate" ~ sub1_value/0.1945,
sub1== "Crit-Damage" ~ sub1_value/0.3885),
sub2_rv = case_when(sub2 == "HP" & sub2_value < 1 ~ sub2_value/0.2915,
sub2== "HP" & sub2_value > 1 ~ sub2_value/1493.75,
sub2== "ATK" & sub2_value < 1 ~ sub2_value/0.2915,
sub2== "ATK" & sub2_value > 1 ~ sub2_value/97.25,
sub2== "DEF" & sub2_value < 1 ~ sub2_value/0.3645,
sub2== "DEF" & sub2_value > 1 ~ sub2_value/115.75,
sub2== "ER" ~ sub2_value/0.0648,
sub2== "EM" ~ sub2_value/116.55,
sub2== "Crit-Rate" ~ sub2_value/0.1945,
sub2== "Crit-Damage" ~ sub2_value/0.3885),
sub3_rv = case_when(sub3 == "HP" & sub3_value < 1 ~ sub3_value/0.2915,
sub3== "HP" & sub3_value > 1 ~ sub3_value/1493.75,
sub3== "ATK" & sub3_value < 1 ~ sub3_value/0.2915,
sub3== "ATK" & sub3_value > 1 ~ sub3_value/97.25,
sub3== "DEF" & sub3_value < 1 ~ sub3_value/0.3645,
sub3== "DEF" & sub3_value > 1 ~ sub3_value/115.75,
sub3== "ER" ~ sub3_value/0.0648,
sub3== "EM" ~ sub3_value/116.55,
sub3== "Crit-Rate" ~ sub3_value/0.1945,
sub3== "Crit-Damage" ~ sub3_value/0.3885),
sub4_rv = case_when(sub4 == "HP" & sub4_value < 1 ~ sub4_value/0.2915,
sub4== "HP" & sub4_value > 1 ~ sub4_value/1493.75,
sub4== "ATK" & sub4_value < 1 ~ sub4_value/0.2915,
sub4== "ATK" & sub4_value > 1 ~ sub4_value/97.25,
sub4== "DEF" & sub4_value < 1 ~ sub4_value/0.3645,
sub4== "DEF" & sub4_value > 1 ~ sub4_value/115.75,
sub4== "ER" ~ sub4_value/0.324,
sub4== "EM" ~ sub4_value/116.55,
sub4== "Crit-Rate" ~ sub4_value/0.1945,
sub4== "Crit-Damage" ~ sub4_value/0.3885),
rv=100*(sub1_rv+sub2_rv+sub3_rv+sub4_rv)) %>%
arrange(-rv)
head(artifacts) # 6 highest rv artifacts on the account
artifacts_summary <- artifacts %>% group_by(set,type,main) %>% summarise(n_have=n())
artifactfarming_summary <- artifactfarming %>% group_by(artifact_set,artifact_type,artifact_main) %>% summarise(n_needed=n())
left_join(artifactfarming_summary,artifacts_summary, by=c("artifact_set"="set","artifact_type"="type","artifact_main"="main")) %>%mutate_all(~replace(., is.na(.), 0)) %>% mutate(n_need=n_needed-n_have) %>% write.table(.,"artifactfarming.csv",sep=",",row.names=FALSE,quote=FALSE)
artifactfarming_summary %>%group_by(artifact_set) %>% summarise(n=n()) %>% arrange(-n) %>% write.csv("level_farm.csv",row.names=FALSE,quote=FALSE)
View(characters)
my_builds <- merge(builds,characters,on="character"
)
View(my_builds)
setdif(characters$character,my_builds$character)
setdiff(characters$character,my_builds$character)
library(tidyverse)
# account info
characters <- read.csv("my_characters.csv",header=T) # my characters
builds <- read.csv("builds.csv",header=T) # builds used
weapons <- read.csv("my_weapons.csv",header = T) # my weapons
artifacts <- read.csv("artifacts.csv",header=T) # my artifacts and planning
artifact_set <- c("Archaic Petra","Blizzard Strayer","Crimson Witch of Flames","Deepwood Memories","Desert Pavillion Chronicle","Echoes of An Offering","Emblem of Severed Fate","Finale of Deep Galleries","Flower of Paradise Lost","Fragment of Harmonic Whimsy","Gilded Dreams","Gladiator's Finale","Golden Troupe","Heart of Depths","Husk of Oppulent Dreams","Lavawalker","Long Night's Oath","Maiden Beloved","Marechaussee Hunter","Night of the Sky's Unveiling","Nighttime Whispers in the Echoing Woods","Noblesse Oblige","Nymph's Dream","Obsidian Codex","Ocean-Hued Clam","Pale Flame","Retracing Bolide","Scroll of the Hero of Cinder City","Silken Moon's Serenade","Shimenawa's Reminiscence","Song of Day's Past","Tenacity of the Milileth","Thundering Fury","Thundersoother","Unfinished Reverie","Vermillion Hereafter","Viridescent Venerer","Vourukasha's Glow","Wanderer's Troupe")
artifact_type <- c("Flower","Feather","Sands","Goblet","Circlet")
artifacts_needed <- expand_grid(artifact_set,artifact_type) %>%
mutate(artifact_main=case_when(artifact_type=="Flower" ~ "HP",
artifact_type=="Feather" ~ "ATK",
artifact_type=="Sands" ~ "ATK:DEF:ER:EM:HP",
artifact_type=="Goblet" ~"Anemo_DMG:ATK:Cryo_DMG:DEF:Dendro_DMG:Electro_DMG:EM:Geo_DMG:HP:Hydro_DMG:Pyro_DMG",
artifact_type=="Circlet" ~ "ATK:Crit_DMG:Crit_Rate:DEF:Healing_Bonus:EM:HP")) %>% separate_longer_delim(artifact_main,delim=":")
builds_artifacts <- builds %>% select(build_name,artifact_set,artifact_main) %>% separate_longer_delim(artifact_main,delim=":") %>% separate_longer_delim(artifact_set,delim=":") %>% group_by(build_name) %>% mutate(artifact_type=rep(c("Flower","Feather","Sands","Goblet","Circlet"),length.out=n()))
artifactfarming <- dplyr::bind_rows(artifacts_needed,builds_artifacts) %>% arrange(artifact_set,factor(artifact_type,levels=c("Flower","Feather","Sands","Goblet","Circlet"))) %>% ungroup()
artifacts <- artifacts %>%
mutate(sub1_rv = case_when(sub1 == "HP" & sub1_value < 1 ~ sub1_value/0.2915,
sub1== "HP" & sub1_value > 1 ~ sub1_value/1493.75,
sub1== "ATK" & sub1_value < 1 ~ sub1_value/0.2915,
sub1== "ATK" & sub1_value > 1 ~ sub1_value/97.25,
sub1== "DEF" & sub1_value < 1 ~ sub1_value/0.3645,
sub1== "DEF" & sub1_value > 1 ~ sub1_value/115.75,
sub1== "ER" ~ sub1_value/0.0648,
sub1== "EM" ~ sub1_value/116.55,
sub1== "Crit-Rate" ~ sub1_value/0.1945,
sub1== "Crit-Damage" ~ sub1_value/0.3885),
sub2_rv = case_when(sub2 == "HP" & sub2_value < 1 ~ sub2_value/0.2915,
sub2== "HP" & sub2_value > 1 ~ sub2_value/1493.75,
sub2== "ATK" & sub2_value < 1 ~ sub2_value/0.2915,
sub2== "ATK" & sub2_value > 1 ~ sub2_value/97.25,
sub2== "DEF" & sub2_value < 1 ~ sub2_value/0.3645,
sub2== "DEF" & sub2_value > 1 ~ sub2_value/115.75,
sub2== "ER" ~ sub2_value/0.0648,
sub2== "EM" ~ sub2_value/116.55,
sub2== "Crit-Rate" ~ sub2_value/0.1945,
sub2== "Crit-Damage" ~ sub2_value/0.3885),
sub3_rv = case_when(sub3 == "HP" & sub3_value < 1 ~ sub3_value/0.2915,
sub3== "HP" & sub3_value > 1 ~ sub3_value/1493.75,
sub3== "ATK" & sub3_value < 1 ~ sub3_value/0.2915,
sub3== "ATK" & sub3_value > 1 ~ sub3_value/97.25,
sub3== "DEF" & sub3_value < 1 ~ sub3_value/0.3645,
sub3== "DEF" & sub3_value > 1 ~ sub3_value/115.75,
sub3== "ER" ~ sub3_value/0.0648,
sub3== "EM" ~ sub3_value/116.55,
sub3== "Crit-Rate" ~ sub3_value/0.1945,
sub3== "Crit-Damage" ~ sub3_value/0.3885),
sub4_rv = case_when(sub4 == "HP" & sub4_value < 1 ~ sub4_value/0.2915,
sub4== "HP" & sub4_value > 1 ~ sub4_value/1493.75,
sub4== "ATK" & sub4_value < 1 ~ sub4_value/0.2915,
sub4== "ATK" & sub4_value > 1 ~ sub4_value/97.25,
sub4== "DEF" & sub4_value < 1 ~ sub4_value/0.3645,
sub4== "DEF" & sub4_value > 1 ~ sub4_value/115.75,
sub4== "ER" ~ sub4_value/0.324,
sub4== "EM" ~ sub4_value/116.55,
sub4== "Crit-Rate" ~ sub4_value/0.1945,
sub4== "Crit-Damage" ~ sub4_value/0.3885),
rv=100*(sub1_rv+sub2_rv+sub3_rv+sub4_rv)) %>%
arrange(-rv)
head(artifacts) # 6 highest rv artifacts on the account
# find artifacts you need
artifacts_summary <- artifacts %>% group_by(set,type,main) %>% summarise(n_have=n())
artifactfarming_summary <- artifactfarming %>% group_by(artifact_set,artifact_type,artifact_main) %>% summarise(n_needed=n())
left_join(artifactfarming_summary,artifacts_summary, by=c("artifact_set"="set","artifact_type"="type","artifact_main"="main")) %>%mutate_all(~replace(., is.na(.), 0)) %>% mutate(n_need=n_needed-n_have) %>% write.table(.,"artifactfarming.csv",sep=",",row.names=FALSE,quote=FALSE)
# incase of export wanted
artifactfarming_summary %>%group_by(artifact_set) %>% summarise(n=n()) %>% arrange(-n) %>% write.csv("level_farm.csv",row.names=FALSE,quote=FALSE)
my_builds <- merge(builds,characters,on="character")
# check which builds are missing
setdiff(characters$character,my_builds$character)
View(my_builds)
my_builds <- merge(builds,characters,on="character") %>% merge(.,weapons,on="weapon")
library(installr)
updateR()
