---
title: "Organise Your Dailies"
author: "Alice de Sampaio Kalkuhl"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_knit$set(root.dir = 'C:/Users/alice/Documents/GitHub/Genshin')
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, results='asis')
library(tidyverse)

```
# data import 
```{r data import}
# account info 
characters <- read.csv("my_characters.csv",header=T) # my characters
builds <- read.csv("builds.csv",header=T) # builds used 
weapons <- read.csv("my_weapons.csv",header=T) # my weapons
artifacts <- read.csv("artifactfarming.csv",header=T,sep=",") # my artifacts and planning
```

# artifact farming
```{r artifacts}
artifacts <- artifacts %>% 
mutate(type = ifelse(is.na(character)==TRUE,"spare","build") ,
      sub1_rv = case_when(sub1 == "HP" & sub1_value < 1 ~ sub1_value/0.2915, 
                    sub1== "HP" & sub1_value > 1 ~ sub1_value/1493.75, 
                    sub1== "ATK" & sub1_value < 1 ~ sub1_value/0.2915,
                    sub1== "ATK" & sub1_value > 1 ~ sub1_value/97.25,
                    sub1== "DEF" & sub1_value < 1 ~ sub1_value/0.3645,
                    sub1== "DEF" & sub1_value > 1 ~ sub1_value/115.75,
                    sub1== "ER" ~ sub1_value/0.0648,
                    sub1== "EM" ~ sub1_value/116.55, 
                    sub1== "Crit-Rate" ~ sub1_value/0.1945, 
                    sub1== "Crit-Damage" ~ sub1_value/0.3885),
        sub2_rv = case_when(sub2 == "HP" & sub2_value < 1 ~ sub2_value/0.2915, 
                    sub2== "HP" & sub2_value > 1 ~ sub2_value/1493.75, 
                    sub2== "ATK" & sub2_value < 1 ~ sub2_value/0.2915,
                    sub2== "ATK" & sub2_value > 1 ~ sub2_value/97.25,
                    sub2== "DEF" & sub2_value < 1 ~ sub2_value/0.3645,
                    sub2== "DEF" & sub2_value > 1 ~ sub2_value/115.75,
                    sub2== "ER" ~ sub2_value/0.0648,
                    sub2== "EM" ~ sub2_value/116.55, 
                    sub2== "Crit-Rate" ~ sub2_value/0.1945, 
                    sub2== "Crit-Damage" ~ sub2_value/0.3885),
        sub3_rv = case_when(sub3 == "HP" & sub3_value < 1 ~ sub3_value/0.2915, 
                    sub3== "HP" & sub3_value > 1 ~ sub3_value/1493.75, 
                    sub3== "ATK" & sub3_value < 1 ~ sub3_value/0.2915,
                    sub3== "ATK" & sub3_value > 1 ~ sub3_value/97.25,
                    sub3== "DEF" & sub3_value < 1 ~ sub3_value/0.3645,
                    sub3== "DEF" & sub3_value > 1 ~ sub3_value/115.75,
                    sub3== "ER" ~ sub3_value/0.0648,
                    sub3== "EM" ~ sub3_value/116.55, 
                    sub3== "Crit-Rate" ~ sub3_value/0.1945, 
                    sub3== "Crit-Damage" ~ sub3_value/0.3885),
        sub4_rv = case_when(sub4 == "HP" & sub4_value < 1 ~ sub4_value/0.2915, 
                    sub4== "HP" & sub4_value > 1 ~ sub4_value/1493.75, 
                    sub4== "ATK" & sub4_value < 1 ~ sub4_value/0.2915,
                    sub4== "ATK" & sub4_value > 1 ~ sub4_value/97.25,
                    sub4== "DEF" & sub4_value < 1 ~ sub4_value/0.3645,
                    sub4== "DEF" & sub4_value > 1 ~ sub4_value/115.75,
                    sub4== "ER" ~ sub4_value/0.324,
                    sub4== "EM" ~ sub4_value/116.55, 
                    sub4== "Crit-Rate" ~ sub4_value/0.1945, 
                    sub4== "Crit-Damage" ~ sub4_value/0.3885),
        rv=sub1_rv+sub2_rv+sub3_rv+sub4_rv) %>% 
        arrange(-rv)

# current RV
# artifacts %>% mutate(type=ifelse($value<1,"multiplier","flat")) %>% 
# group_by(set,character,stat,type) %>% summarise(value=sum())

#artifacts %>% mutate(Crit-Rate=paste0(which($value== "Crit-Rate"),"_value"),
#       Crit-DMG=paste0(which($value==Crit-DMG),"_value"),
#       CV=Crit-Rate + (100*Crit-DMG)^2))
```